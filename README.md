# Телеграмм-бот для ведения статистики тренировок

Этот бот создан для удобного ведения статистики тренировок и отслеживания личного прогресса. Он предлагает пользователям широкий набор функций, которые помогут сделать процесс тренировок более организованным и эффективным.

Основные возможности бота включают:

- **Создание и настройка тренировок.** Вы можете создавать собственные типы тренировок и добавлять к ним упражнения. Если программа тренировок изменилась, бот позволяет архивировать или удалить старые типы тренировок.

- **Отслеживание прогресса.** Для анализа результатов доступна история выполнения каждого упражнения. Это поможет вам видеть динамику улучшений и корректировать план тренировок.

- **Удобный выбор упражнений.** При выполнении тренировки вы можете выбирать упражнения через инлайн-кнопки. Бот автоматически предлагает упражнения, которые были выполнены на предыдущей тренировке данного типа. Если вы хотите выполнить другое упражнение, предусмотрена возможность перехода в меню со всеми доступными упражнениями.

- **Исправление ошибок.** В случае ошибочного выбора упражнения или указания неверного веса, вы всегда можете удалить выполненное упражнение и скорректировать данные.


## Используемые технологии

Проект разработан на языке программирования **Python**. Для корректной работы бота рекомендуется использовать Python версии **3.13** или выше, так как проект был протестирован и оптимизирован именно под эту версию.

Проект поддерживает два способа хранения данных, каждый из которых имеет свои особенности и подходит для разных сценариев использования.

**Хранение данных с использованием MySQL и Redis.** Первый способ предусматривает использование базы данных MySQL для хранения информации о тренировках и упражнениях. Дополнительно применяется Redis , который используется для временного хранения промежуточных данных. Этот подход обеспечивает высокую производительность и масштабируемость, что делает его оптимальным выбором для работы с большим количеством пользователей.

**Упрощённый способ с использованием SQLite.** Второй способ является более простым и ориентирован на небольшое количество пользователей. Все данные, включая информацию о тренировках и упражнениях, хранятся в локальной базе данных SQLite . Этот вариант идеально подходит для использования в средах с ограниченными ресурсами.

Выбор способа хранения данных зависит от ваших потребностей: будь то масштабируемость и производительность для большого числа пользователей или простота и компактность для личного использования.


## Запуск

Перед запуском бота необходимо получить токен через бота `@BotFather` и присвоить его переменной окружения. Бот может быть запущен как локально, так и с использованием Docker. Для удобства развертывания уже подготовлен Docker-образ.

### Локальный запуск бота

Для запуска бота локально необходимо создать файл `.env` в корневой директории проекта и указать в нем переменные окружения.

Если вы используете SQLite, добавьте в файл `.env` следующие параметры:

```env
BOT_TOKEN=your_token
TYPE_DB=sqlite
```

Если вы планируете использовать MySQL+Redis , укажите все необходимые параметры подключения:

```env
BOT_TOKEN=your_token

TYPE_DB=mysql

REDIS_HOST=your_redis_host
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_pass

HOST_DB=your_mysql_host
PORT_DB=3306
USER_DB=your_mysql_user
PASSWORD_DB=your_mysql_pass
NAME_DB=botgym
```
**Примечание:** Если Redis используется без пароля, переменную `REDIS_PASSWORD` можно полностью исключить из файла `.env`.

Перед запуском программы необходимо установить все зависимости, перечисленные в файле `requirements.txt`. Для этого выполните следующую команду из корневой директории проекта:

```bash
pip install -r requirements.txt
```

Для старта программы необходимо выполнить команду из корневой директории проекта:

```bash
python main.py
```

### Запуск бота в Docker

Для запуска бота с SQLite в Docker выполните следующую команду:

```bash
docker run -d \
  --name botgym_container \
  -e BOT_TOKEN="your_token" \
  -e TYPE_DB=sqlite \
  ghcr.io/danil2005/botgym:latest
```

Если вы используете MySQL+Redis , выполните команду ниже. Убедитесь, что у вас уже запущены соответствующие сервисы (Redis и MySQL):

```bash
docker run -d \
  --name botgym_container \
  -e BOT_TOKEN="your_token" \
  -e TYPE_DB=mysql \
  -e REDIS_HOST=your_redis_host \
  -e REDIS_PORT=6379 \
  -e REDIS_PASSWORD=your_redis_pass \
  -e HOST_DB=your_mysql_host \
  -e PORT_DB=3306 \
  -e USER_DB=your_mysql_user \
  -e PASSWORD_DB=your_mysql_pass \
  -e NAME_DB=botgym \
  ghcr.io/danil2005/botgym:latest
```
**Примечание:** Если Redis используется без пароля, параметр `-e REDIS_PASSWORD=your_redis_pass` можно исключить из команды. 

Если вы хотите автоматически развернуть всю инфраструктуру (Redis, MySQL и сам бот), воспользуйтесь `docker-compose`. Создайте файл `docker-compose.yml` со следующим содержимым:

```yaml
version: '3.8'

services:
  redis:
    image: redis:7.4.2-alpine
    container_name: redis_botgym
    volumes:
      - ./bot/redis_botgym:/data
    restart: unless-stopped

  mysql:
    image: mysql:8.0.41-bookworm
    container_name: mysql_botgym
    environment:
      MYSQL_ROOT_PASSWORD: root
    volumes:
      - ./bot/mysql_botgym:/var/lib/mysqldocker
    restart: unless-stopped

  bot:
    image: ghcr.io/danil2005/botgym:latest
    container_name: botgym_container
    depends_on:
      - redis
      - mysql
    environment:
      BOT_TOKEN: "your_token"
      TYPE_DB: mysql
      REDIS_HOST: redis
      REDIS_PORT: 6379
      HOST_DB: mysql
      PORT_DB: 3306
      USER_DB: root
      PASSWORD_DB: root
      NAME_DB: botgym
    restart: unless-stopped
```
После запуска команды `docker-compose up -d` в директории проекта будет создана папка `bot`, содержащая данные Redis и MySQL.

## Попробуйте в действии

Бот успешно развернут на VDS и готов к использованию. Вы можете протестировать его прямо сейчас, перейдя по ссылке:

[Telegram-бот](https://t.me/Workout_statistic_bot "Telegram бот")

## Автор

Потапенков Данил Валерьевич  
+79964188236  
danil2000p@yandex.ru  






